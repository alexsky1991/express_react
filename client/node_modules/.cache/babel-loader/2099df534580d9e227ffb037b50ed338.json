{"ast":null,"code":"var _jsxFileName = \"/home/akondrutskiy/materials/express_react/client/src/comps/pages/game-page/game-page.js\";\nimport React from 'react';\nimport './game-page.css';\nimport Bar from '../../bar';\nimport { Provider } from '../../context';\n\nconst questions = require(\"./questions.json\");\n\nexport default class GamePage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      pos: 0,\n      choose: true,\n      answer: false,\n      answers: [],\n      res: false\n    };\n\n    this.callBackendAPI = async () => {\n      const response = await fetch('/express_backend');\n      const body = await response.json();\n\n      if (response.status !== 200) {\n        throw Error(body.message);\n      }\n\n      return body;\n    };\n\n    this.clickItem = e => {\n      if (e.target.className !== \"game_content_answer\" || !this.state.choose) return;\n      this.setState({\n        choose: false,\n        answer: e.target.innerHTML\n      }, () => setTimeout(this.check, 1000));\n    };\n\n    this.check = () => {\n      const _this$state = this.state,\n            answer = _this$state.answer,\n            pos = _this$state.pos,\n            answer_right = questions[pos].right;\n      this.setState({\n        res: true\n      });\n      setTimeout(() => {\n        const condition = answer === answer_right;\n        if (!condition) alert('Вы проебали!Можно начать заново!');\n        this.setState({\n          pos: condition ? this.state.pos + 1 : 0,\n          choose: true,\n          answer: false,\n          res: false\n        }, () => {\n          this.setState({\n            answers: questions[this.state.pos].answers\n          });\n        });\n      }, 1000);\n    };\n\n    this.callTip50 = () => {\n      let arr = this.state.answers.slice();\n      let pos = this.state.pos;\n      let right = questions[pos].right; // let random = Math.random() >= 0.5;\n\n      let mount = true;\n      arr = arr.map((el, idx) => {\n        if (el === right) return el;\n        if (mount) el = '';\n        mount = !mount;\n        return el;\n      });\n      this.setState({\n        answers: arr\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.callBackendAPI().then(res => this.setState({\n      answers: res.questions\n    })).catch(err => console.log(err));\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          pos = _this$state2.pos,\n          answer = _this$state2.answer,\n          res = _this$state2.res,\n          answers = _this$state2.answers,\n          item = questions[pos];\n    console.log(answers);\n    return React.createElement(Provider, {\n      value: this.callTip50,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"game\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"game_main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Bar, {\n      pos: pos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"game_main_bg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"game_footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"game_content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"game_content_question\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, item.question), React.createElement(\"div\", {\n      className: \"game_content_answers\",\n      onClick: this.clickItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, answers && answers.map((el, idx) => {\n      let className = \"game_content_answer\";\n      if (!res && el === answer) className += \" answer_choose\";\n      if (res && el === item.right) className += \" answer_right\";\n      if (res && answer !== item.right && answer === el) className += \" answer_false\";\n      return React.createElement(\"div\", {\n        key: idx,\n        className: className,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, el);\n    }))))));\n  }\n\n}","map":{"version":3,"sources":["/home/akondrutskiy/materials/express_react/client/src/comps/pages/game-page/game-page.js"],"names":["React","Bar","Provider","questions","require","GamePage","Component","state","pos","choose","answer","answers","res","callBackendAPI","response","fetch","body","json","status","Error","message","clickItem","e","target","className","setState","innerHTML","setTimeout","check","answer_right","right","condition","alert","callTip50","arr","slice","mount","map","el","idx","componentDidMount","then","catch","err","console","log","render","item","question"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport './game-page.css';\n\nimport Bar from '../../bar';\n\nimport { Provider } from '../../context';\n\nconst questions = require(\"./questions.json\");\n\n\nexport default class GamePage extends React.Component {\n\n\tstate = {\n\t\tpos: 0,\n\t\tchoose: true,\n\t\tanswer: false,\n\t\tanswers: [],\n\t\tres: false\n\t}\n\n\tcomponentDidMount() {\n    \tthis.callBackendAPI()\n        \t.then(res => this.setState({ answers: res.questions }))\n        \t.catch(err => console.log(err));\n\t}\n\n\n\tcallBackendAPI = async () => {\n\n    \tconst response = await fetch('/express_backend');\n    \tconst body = await response.json();\n\n    \tif (response.status !== 200) {\n    \t\tthrow Error(body.message) \n      \t}\n\n    \treturn body;\n\n  \t};\n\n\n\tclickItem = e => {\n\t\tif(e.target.className !== \"game_content_answer\" || !this.state.choose)\n\t\t\treturn;\n\n\t\tthis.setState({\n\t\t\tchoose: false,\n\t\t\tanswer: e.target.innerHTML\n\n\t\t}, () => setTimeout(this.check, 1000))\n\t}\n\n\tcheck = () => {\n\t\t\n\t\tconst {answer, pos } = this.state,\n\t\t\t   answer_right = questions[pos].right; \n\n\t\tthis.setState({res: true})\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tconst condition = answer === answer_right;\n\n\t\t\tif(!condition)\n\t\t\t\talert('Вы проебали!Можно начать заново!');\n\n\t\t\tthis.setState({\n\t\t\t\tpos: condition ? this.state.pos + 1 : 0,\n\t\t\t\tchoose: true,\n\t\t\t\tanswer: false,\n\t\t\t\tres: false\n\t\t\t}, () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tanswers: questions[this.state.pos].answers\n\t\t\t\t})\n\t\t\t})\t\n\n\t\t}, 1000);\n\t}\n\n\tcallTip50 = () => {\n\t\tlet arr = this.state.answers.slice();\n\t\tlet { pos } = this.state;\n\t\tlet right = questions[pos].right;\n\t\t\n\t\t// let random = Math.random() >= 0.5;\n\n\t\tlet mount = true\n\n\t\tarr = arr.map((el,idx) => {\n\t\t\tif(el === right)\n\t\t\t\treturn el\n\n\t\t\tif(mount) \n\t\t\t\tel = ''\n\t\t\t\n\t\t\tmount = !mount\n\n\t\t\treturn el\n\n\t\t})\n\n\t\tthis.setState({ answers: arr })\n\t}\n\t\n\trender() {\n\t\tconst { pos, answer, res, answers } = this.state,\n\t\t\t\titem = questions[pos];\n\n\t\tconsole.log(answers);\n\n\t\treturn (\n\t\t\t<Provider value={this.callTip50}>\n\t\t\t\t<div className=\"game\">\n\t\t\t\t\t<div className=\"game_main\">\n\n\t\t\t\t\t\t<Bar pos={pos} />\n\n\t\t\t\t\t\t<div className=\"game_main_bg\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"game_footer\">\n\t\t\t\t\t\t<div className=\"game_content\">\n\t\t\t\t\t\t\t<div className=\"game_content_question\">{item.question}</div>\n\t\t\t\t\t\t\t<div className=\"game_content_answers\" onClick={this.clickItem}>\n\t\t\t\t\t\t\t\t{ answers &&\n\t\t\t\t\t\t\t\t\tanswers.map((el, idx) => {\n\t\t\t\t\t\t\t\t\t\tlet className = \"game_content_answer\";\n\n\t\t\t\t\t\t\t\t\t\tif(!res && el === answer) \n\t\t\t\t\t\t\t\t\t\t\tclassName += \" answer_choose\";\n\n\t\t\t\t\t\t\t\t\t\tif(res && el === item.right) \n\t\t\t\t\t\t\t\t\t\t\tclassName += \" answer_right\";\n\n\t\t\t\t\t\t\t\t\t\tif(res && answer !== item.right && answer === el) \n\t\t\t\t\t\t\t\t\t\t\tclassName += \" answer_false\";\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\treturn <div key={idx} className={className}>\n\t\t\t\t\t\t\t\t\t\t\t\t{el}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Provider>\n\t\t)\n\t}\n}"]},"metadata":{},"sourceType":"module"}