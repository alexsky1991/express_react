(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(53)},42:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e){e.exports=[{amount:1e6,fire:!0,id:14},{amount:5e5,id:13},{amount:25e4,id:12},{amount:125e3,id:11},{amount:64e3,id:10},{amount:32e3,fire:!0,id:9},{amount:16e3,id:8},{amount:8e3,id:7},{amount:4e3,id:6},{amount:2e3,id:5},{amount:1e3,fire:!0,id:4},{amount:500,id:3},{amount:300,id:2},{amount:200,id:1},{amount:100,id:0}]},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(19),c=a.n(i),r=a(2),l=a(3),o=a(5),m=a(4),u=a(6),d=a(22),p=a(15),h=a(16),_=(a(42),a(12)),f=a(17),v=a.n(f),w=a(21),g=(a(45),a(46),new(a(32).EventEmitter)),E=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={fifty:!0,audi:!0,audi_show:!1,call:!0,call_show:!1},a.rightAnswer=null,a.clickTip50=function(){a.state.fifty&&(a.setState({fifty:!1}),a.props.callTip50&&a.props.callTip50())},a.clickTipAudi=function(){a.state.audi&&a.setState({audi:!1,audi_show:!0})},a.clickTipCall=function(){a.state.call&&a.setState({call:!1,call_show:!0})},a.closeAudi=function(){document.getElementsByClassName("tip_audi")[0].className+=" tip_audi_hide",setTimeout(function(){a.setState({audi_show:!1})},1200)},a.closeCall=function(){document.getElementsByClassName("tip_call")[0].className+=" tip_call_hide",setTimeout(function(){a.setState({call_show:!1})},3e3)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.addListener("loseGame",function(){e.setState({fifty:!0,audi:!0,call:!0,audi_show:!1,call_show:!1})}),g.addListener("nextRound",function(){e.setState({audi_show:!1,call_show:!1})}),g.addListener("sendRightAnswer",function(t){e.rightAnswer=t})}},{key:"render",value:function(){var e=this.state,t=e.fifty,a=e.audi,n=e.audi_show,i=e.call,c=e.call_show,r="tips_item tips_item_50",l="tips_item tips_item_audi",o="tips_item tips_item_call";return t||(r+=" reject"),a||(l+=" reject"),i||(o+=" reject"),s.a.createElement("div",{className:"tips"},s.a.createElement("div",{id:"tip50",className:r,onClick:this.clickTip50}),s.a.createElement("div",{className:l,onClick:this.clickTipAudi}),s.a.createElement("div",{className:o,onClick:this.clickTipCall}),s.a.createElement("div",{className:"tip_wrapper_window"},n&&s.a.createElement("div",{className:"tip_window tip_audi"},"\u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u044f \u0434\u0443\u043c\u0430\u0435\u0442 \u0447\u0442\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442: ",s.a.createElement("br",null),s.a.createElement("span",{className:"tip_answer"},this.rightAnswer),s.a.createElement("span",{className:"tip_close",onClick:this.closeAudi},"\xd7")),c&&s.a.createElement("div",{className:"tip_window tip_call"},"\u0432\u0430\u0448 \u0442\u043e\u0432\u0430\u0440\u0438\u0449 \u0434\u0443\u043c\u0430\u0435\u0442 \u0447\u0442\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442: ",s.a.createElement("br",null),s.a.createElement("span",{className:"tip_answer"},this.rightAnswer),s.a.createElement("span",{className:"tip_close",onClick:this.closeCall},"\xd7"))))}}]),t}(s.a.Component),N=(a(47),s.a.createContext()),b=N.Provider,y=N.Consumer,O=a(48),j=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.pos;return s.a.createElement("div",{className:"bar"},s.a.createElement(y,null,function(t){return s.a.createElement(E,{pos:e,callTip50:t})}),s.a.createElement("div",{className:"bar_levels"},O.map(function(t){var a="bar_level ";return t.fire&&(a+=" bar_level_fire"),t.id===e&&(a+=" bar_level_active"),s.a.createElement("div",{key:t.id,className:a},s.a.createElement("div",{className:"bar_level_content"},s.a.createElement("div",{className:"bar_level_number"},t.id+1),s.a.createElement("div",{className:"bar_level_amount"},t.amount)))})))}}]),t}(s.a.Component),k=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={pos:0,right:"",answers:[],question:"",condition:!1},a.callBackendAPI=Object(w.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/express_backend");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e)})),a.clickItem=function(e){var t=e.target;""!==t.innerHTML&&"game_content_answer"===t.className&&"choose"!==a.state.condition&&(t.className="game_content_answer answer_choose",a.setState({condition:"choose"},function(){return setTimeout(function(){var e,n;t.innerHTML===a.state.right?(t.className="game_content_answer answer_right",e=a.state.pos+1,g.emit("nextRound"),15===e&&(setTimeout(function(){return alert("\u0432\u044b \u043f\u043e\u0431\u0435\u0434\u0438\u043b\u0438")},1e3),e=0)):(t.className="game_content_answer answer_false",e=0,setTimeout(function(){return alert("\u0432\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b\u0438")},1e3),g.emit("loseGame"),(n=Object(_.a)(document.getElementsByClassName("game_content_answer")).filter(function(e){return e.innerHTML===a.state.right})[0]).className="game_content_answer answer_right"),a.callBackendAPI().then(function(s){var i=s.data.answers[0];console.log(s.data.answers),g.emit("sendRightAnswer",i);var c=s.data.answers.sort(function(){return.5-Math.random()});return setTimeout(function(){t.className="game_content_answer",n&&(n.className="game_content_answer"),a.setState({question:s.data.question,right:i,answers:c,pos:e,condition:!1})},1500)}).catch(function(e){return console.log(e)})},1500)}))},a.callTip50=function(){if(!a.state.condition){var e=Object(_.a)(document.getElementsByClassName("game_content_answer")).filter(function(e){return e.innerHTML!==a.state.right}),t=Math.floor(3*Math.random());e.forEach(function(e,a){t!==a&&(e.innerHTML="")})}},a.getMoney=function(){a.state.pos>4&&alert("\u0432\u0430\u0448 \u0432\u044b\u0438\u0433\u0440\u044b\u0448 1000"),a.state.pos>9&&alert("\u0432\u0430\u0448 \u0432\u044b\u0438\u0433\u0440\u044b\u0448 32000"),a.setState({pos:0}),g.emit("loseGame")},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.callBackendAPI().then(function(t){var a=t.data.answers[0];console.log(t.data.answers),g.emit("sendRightAnswer",a);var n=t.data.answers.sort(function(){return.5-Math.random()});return e.setState({question:t.data.question,right:a,answers:n})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.state,t=e.pos,a=e.answers,n=e.question;return s.a.createElement(b,{value:this.callTip50},s.a.createElement("div",{className:"game"},s.a.createElement("div",{className:"game_main"},s.a.createElement(j,{pos:t}),s.a.createElement("div",{className:"game_main_bg"}),t>4&&s.a.createElement("div",{className:"game_money_wrapper"},s.a.createElement("div",{className:"game_money",onClick:this.getMoney},"\u0417\u0430\u0431\u0440\u0430\u0442\u044c \u0434\u0435\u043d\u044c\u0433\u0438 ",t>9?"32000":"1000"))),s.a.createElement("div",{className:"game_footer"},s.a.createElement("div",{className:"game_content"},s.a.createElement("div",{className:"game_content_question"},n),s.a.createElement("div",{className:"game_content_answers",onClick:this.clickItem},a.map(function(e,t){return s.a.createElement("div",{key:t,className:"game_content_answer"},e)}))))))}}]),t}(s.a.Component),I=a(28),S=(a(49),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={active:!1,item:a.props.item},a.editItem=function(){a.setState({active:!a.state.active})},a.changeQuestion=function(e){var t=Object(I.a)({},a.state.item,{question:e.target.value});a.setState({item:t},function(){return a.props.changeData(a.state.item)})},a.changeAnswer=function(e){var t=Object(I.a)({},a.state.item),n=e.target.value,s=+e.target.getAttribute("number");t.answers=t.answers.map(function(e,t){return t===s&&(e=n),e}),a.setState({item:t},function(){return a.props.changeData(a.state.item)})},a.deleteItem=function(e){e.target.closest(".item").className+=" item_hide",setTimeout(function(){a.props.deleteItem(a.state.item.id)},600)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.active,n=t.item;return a?s.a.createElement("div",{style:{background:"#7b684a"},className:"item item_bg_edit"},s.a.createElement("div",{className:"item_panel"},s.a.createElement("div",{className:"item_question"},s.a.createElement("textarea",{type:"text",className:"item_question_input",size:n.question.length,defaultValue:n.question,onBlur:this.changeQuestion})),s.a.createElement("div",{className:"item_right"},s.a.createElement("div",{className:"item_delete",onClick:this.deleteItem},"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"),s.a.createElement("div",{className:"item_edit",onClick:this.editItem},"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))),s.a.createElement("div",{className:"item_answers"},n.answers.map(function(t,a){return s.a.createElement("input",{key:a,number:a,className:"item_answer_input",defaultValue:t,style:{width:9*(t.length+1)+"px"},onBlur:e.changeAnswer})}))):s.a.createElement("div",{className:"item",style:{animationDelay:"".concat(this.props.idx/20,"s")}},s.a.createElement("div",{className:"item_panel"},s.a.createElement("div",{className:"item_question"},n.question),s.a.createElement("div",{className:"item_edit",onClick:this.editItem},"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),s.a.createElement("div",{className:"item_answers"},n.answers.map(function(e){return s.a.createElement("div",{key:e,className:"item_answer"},e)})))}}]),t}(s.a.Component)),C=(a(50),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).deleteItem=function(){a.props.deleteNewItem()},a.saveItem=function(){var e={answers:[],question:"",id:""};e.id=""+Math.floor(1e4*Math.random()+3e4),e.question=document.getElementById("new_question").value,e.answers=Object(_.a)(document.getElementById("item_answers").childNodes).map(function(e){return e.value}),a.props.addItem(e)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{style:{background:"#7b684a"},className:"item new_item"},s.a.createElement("div",{className:"item_panel"},s.a.createElement("div",{className:"item_question"},s.a.createElement("input",{id:"new_question",type:"text",className:"item_question_input",size:"50",placeholder:"\u043d\u043e\u0432\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441"})),s.a.createElement("div",{className:"item_right"},s.a.createElement("div",{className:"item_delete",onClick:this.deleteItem},"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"),s.a.createElement("div",{className:"item_edit",onClick:this.saveItem},"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))),s.a.createElement("div",{id:"item_answers",className:"item_answers"},s.a.createElement("input",{type:"text",className:"item_answer_input",placeholder:"\u0432\u0430\u0440\u0438\u0430\u043d\u0442 1"}),s.a.createElement("input",{type:"text",className:"item_answer_input",placeholder:"\u0432\u0430\u0440\u0438\u0430\u043d\u0442 2"}),s.a.createElement("input",{type:"text",className:"item_answer_input",placeholder:"\u0432\u0430\u0440\u0438\u0430\u043d\u0442 3"}),s.a.createElement("input",{type:"text",className:"item_answer_input",placeholder:"\u0432\u0430\u0440\u0438\u0430\u043d\u0442 4"})))}}]),t}(s.a.Component)),T=function(e,t){var a=Object(_.a)(t);return a.unshift(e),a},q=function(e,t){var a=Object(_.a)(t);return a=a.filter(function(t){return t.id!==e})},x=function(e,t){var a=Object(_.a)(t);return a=a.map(function(t){return t.id===e.id&&(t=e),t})},A=(a(51),"QUESTIONS_LOADING"),M="QUESTIONS_ERROR",D="QUESTIONS_SET",B=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={data:[],new_item:!1,page:parseInt(a.props.match.params.clid),amount_items:[]},a.callBackendAPI=Object(w.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/express_all");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e)})),a.changeData=function(e){var t=x(e,a.state.data);a.setState({data:t},a.postData)},a.deleteItem=function(e){var t=q(e,a.state.data);a.setState({data:t},a.postData)},a.addItem=function(e){var t=T(e,a.state.data);a.setState({data:t,new_item:!1},a.postData)},a.showNewItem=function(){a.setState({new_item:!0})},a.deleteNewItem=function(){a.setState({new_item:!1})},a.postData=function(){fetch("/express_post",{method:"POST",body:JSON.stringify({data:a.state.data}),headers:{"content-type":"application/json"}})},a.changeNavigation=function(e){"admin_navigation_item"===e.target.className&&a.setState({page:+e.target.innerHTML})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:A});var t=Math.floor((document.body.clientHeight-80)/82);this.setState({amount_items:t}),window.onresize=function(){var a=document.body.clientHeight-83;t=Math.floor(a/82),e.setState({amount_items:t})},this.callBackendAPI().then(function(t){var a;e.props.dispatch((a=t.data,{type:D,questions:a})),e.setState({data:t.data})}).catch(function(t){e.props.dispatch({type:M}),console.log(t)})}},{key:"componentDidUpdate",value:function(){this.props.match.params.clid&&this.state.page!==parseInt(this.props.match.params.clid)&&this.setState({page:parseInt(this.props.match.params.clid)})}},{key:"render",value:function(){var e=this;if(this.props.questions.status<=1)return s.a.createElement("p",{style:{color:"red"}},'"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."');var t,a=this.state,n=a.data,i=a.new_item,c=a.page,r=a.amount_items,l=(c-1)*r,o=[],m="admin_list";if(r){if(t=n.length%r===0?n.length/r:n.length/r+1,2===this.props.questions.status)return s.a.createElement("div",{className:"admin_not-page"},s.a.createElement("div",null,"\u043e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"),s.a.createElement("div",{className:"admin_not_found_img"}));c===(t=Math.floor(t))&&(m+=" admin_list_last");for(var u=1;u<=t;u++)o.push(s.a.createElement(h.b,{to:"/admin/".concat(u),key:u,className:"admin_navigation_item",style:{background:c===u?"#656464":""}},u))}return s.a.createElement("div",{className:"admin"},s.a.createElement("div",{className:"admin_header"},s.a.createElement("div",{className:"admin_header_amount"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432: ",n.length),s.a.createElement("div",{className:"admin_title"},"C\u043f\u0438\u0441\u043e\u043a \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432:"),s.a.createElement("div",{className:"admin_new",onClick:this.showNewItem},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441")),i&&s.a.createElement(C,{addItem:this.addItem,deleteNewItem:this.deleteNewItem}),s.a.createElement("div",{className:m},r&&n.slice(l,l+r).map(function(t,a){return s.a.createElement(S,{key:t.id,item:t,idx:a,changeData:e.changeData,deleteItem:e.deleteItem})})),s.a.createElement("div",{className:"admin_navigation",onClick:this.changeNavigation},o))}}]),t}(s.a.Component),L=Object(d.b)(function(e){return{questions:e.questions}})(B),H=a(14),R=(a(52),{status:0,data:null});var P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return{status:1,data:null};case M:return{status:2,data:null};case D:return{status:3,data:t.questions};default:return e}},Q=Object(p.b)({questions:P}),G=Object(p.c)(Q),U=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(d.a,{store:G},s.a.createElement("div",{className:"wrapper font"},s.a.createElement(h.a,null,s.a.createElement(H.a,{path:"/",exact:!0,component:k}),s.a.createElement(H.a,{path:"/admin/:clid",component:L}))))}}]),t}(s.a.Component);c.a.render(s.a.createElement(U,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.12502c79.chunk.js.map